// ë©€í‹° ëª¨ë“ˆ ë°©ì‹ìœ¼ë¡œ ì„¤ê³„
plugins {
    id 'java'
    id 'org.springframework.boot' version '3.1.3' apply false        // ğŸš€ Spring Boot í”ŒëŸ¬ê·¸ì¸
    id 'io.spring.dependency-management' version '1.1.3' apply false // ğŸ“¦ ì˜ì¡´ì„± ê´€ë¦¬ í”ŒëŸ¬ê·¸ì¸
    id 'com.google.cloud.tools.jib' version '3.4.0' apply false      // ğŸ³ Docker ì´ë¯¸ì§€ ë¹Œë“œìš© í”ŒëŸ¬ê·¸ì¸
}

// ğŸ› ï¸ ê³µí†µ ì„¤ì • ë³€ìˆ˜ ì •ì˜
ext {
    springBootVersion = '3.1.3'
    springDependencyManagementVersion = '1.1.3'
    jibPluginVersion = '3.4.0'
    javaVersion = JavaVersion.VERSION_17
    projectVersion = '1.0.0'
}

// ğŸ·ï¸ ê·¸ë£¹ ID ë° ë²„ì „
group = 'com.lsy'
version = projectVersion

// â˜• Java ë²„ì „ ì„¤ì •
java {
    sourceCompatibility = javaVersion
    targetCompatibility = javaVersion
}

// ğŸŒ ì˜ì¡´ì„± ì €ì¥ì†Œ (ëª¨ë“  ëª¨ë“ˆ ê³µí†µ)
repositories {
    mavenCentral()
}

// ğŸ“ í•˜ìœ„ ëª¨ë“ˆ ê³µí†µ ì„¤ì •
subprojects {
    // ë£¨íŠ¸ í”ŒëŸ¬ê·¸ì¸ ì ìš©
    apply plugin: 'java'
    apply plugin: 'org.springframework.boot'
    apply plugin: 'io.spring.dependency-management'
    apply plugin: 'com.google.cloud.tools.jib'

    repositories {
        mavenCentral()
    }

    java {
        sourceCompatibility = javaVersion
        targetCompatibility = javaVersion
    }

    dependencies {
        implementation 'org.springframework.boot:spring-boot-starter-web'
        testImplementation 'org.springframework.boot:spring-boot-starter-test'
        testRuntimeOnly 'org.junit.platform:junit-platform-launcher'
    }

    tasks.named('test') {
        useJUnitPlatform()
    }
}

// api-common ëª¨ë“ˆ ì„¤ì •
project(':api-common') {

    jar.enabled = true
    bootJar.enabled = false

    dependencies {
        compileOnly group: 'org.springframework', name: 'spring-webmvc', version: '5.3.17'
        compileOnly group: 'org.apache.tomcat.embed', name: 'tomcat-embed-core', version: '9.0.60'
        compileOnly group: 'org.slf4j', name: 'slf4j-api', version: '1.7.36'

        // Jasypt
        compileOnly group: 'com.github.ulisesbocchio', name: 'jasypt-spring-boot-starter', version: '3.0.4'
    }
}
